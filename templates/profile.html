{% extends "base.html" %}
{% block title %}{{ _('Profile') }}{% endblock %}
{% block content %}
<p><i class="bi bi-envelope-at me-1"></i>{{ _('Email') }}: {{ user.email }}</p>

<form action="{{ url_for('user.upload_pic') }}" method="post" enctype="multipart/form-data" class="mb-3">
    <input type="file" name="profile_pic" required>
    <button class="btn btn-secondary btn-sm" type="submit"><i class="bi bi-upload"></i> {{ _('Upload Picture') }}</button>
</form>
{% if user.profile_pic and user.profile_pic != 'default.png' %}
  <form action="{{ url_for('user.delete_pic') }}" method="post" style="display:inline;">
    <button class="btn btn-danger btn-sm"><i class="bi bi-trash"></i> {{ _('Delete Picture') }}</button>
  </form>
{% endif %}
<a href="{{ url_for('shop') }}" class="btn btn-secondary"><i class="bi bi-shop"></i> {{ _('Shop') }}</a>
<a href="{{ url_for('profil.edit_profile') }}" class="btn btn-secondary"><i class="bi bi-pencil-square"></i> {{ _('Edit Profile') }}</a>
<form action="{{ url_for('user.delete_account') }}" method="post" style="display:inline;">
    <button class="btn btn-danger"><i class="bi bi-person-x"></i> {{ _('Delete Account') }}</button>
</form>
{% if discord is not none %}
    {% if not user.discord_linked %}
        <a href="{{ url_for('discord.link_discord') }}" class="btn btn-primary">
            <i class="bi bi-discord"></i> {{ _('Link Discord Account') }}
        </a>
    {% else %}
        <span class="badge bg-success"><i class="bi bi-discord"></i> {{ _('Discord Linked') }}</span>
        <form action="{{ url_for('discord.unlink_discord') }}" method="post" style="display:inline;">
            <button class="btn btn-warning btn-sm" type="submit">
                <i class="bi bi-x-circle"></i> {{ _('Unlink Discord') }}
            </button>
        </form>
    {% endif %}
{% endif %}
{% endblock %}